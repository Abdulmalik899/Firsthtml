(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[3],{"2f39":function(e,n,t){"use strict";t.r(n);t("7d6e"),t("e54f"),t("4848"),t("c382"),t("4f62"),t("ca07"),t("4953"),t("64e9"),t("985d"),t("31cd");var o=t("2b0e"),s=t("1f91"),a=t("42d2"),i=t("b05d"),c=t("8169"),l=t("18d6"),r=t("f508");o["a"].use(i["a"],{config:{},lang:s["a"],iconSet:a["a"],components:{QChatMessage:c["a"]},plugins:{LocalStorage:l["a"],Loading:r["a"]}});var u=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{attrs:{id:"q-app","data-channel":e.channel}},[t("link",{attrs:{href:"statics/themes/"+e.theme+"/app.css?v="+e.version,rel:"stylesheet"}}),e.loading?t("div",[e._v("Loading...")]):e._e(),e.loading?e._e():t("router-view")],1)},d=[],h={name:"App",data(){return{loading:!0,theme:"default",channel:"web",version:Date.now()}},created(){var e=this;initWebWidget((function(){let n=sessionStorage.getItem("session");n&&e.$api.setSessionId(n),e.$i18n.locale=e.$api.getLocale(),e.theme=e.$api.theme,e.loading=!1,e.channel=e.$api.channel}))}},p=h,w=t("2877"),f=Object(w["a"])(p,u,d,!1,null,null,null),m=f.exports,_=t("2f62");o["a"].use(_["a"]);var b=function(){const e=new _["a"].Store({modules:{},strict:!1});return e},g=t("8c4f"),y=t("f0eb");const C=[{path:"/",component:()=>Promise.all([t.e(0),t.e(7)]).then(t.bind(null,"713b")),children:[{path:"/",name:"Welcome",component:()=>Promise.all([t.e(0),t.e(6)]).then(t.bind(null,"9261"))},{path:"/chatbot/",name:"Chatbot",component:()=>Promise.all([t.e(0),t.e(1)]).then(t.bind(null,"5234"))},{path:"/terms-and-conditions/",name:"Terms",component:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"209e"))},{path:"/end-session/",name:"EndSession",component:()=>Promise.all([t.e(0),t.e(2)]).then(t.bind(null,"e603"))}]}];C.push({path:"*",component:()=>Promise.all([t.e(0),t.e(5)]).then(t.bind(null,"e51e"))});var v=C;o["a"].use(g["a"]),o["a"].use(y["default"]);var S=function(){const e=new g["a"]({scrollBehavior:()=>({x:0,y:0}),routes:v,mode:"hash",base:""});return e},I=async function(){const e="function"===typeof b?await b({Vue:o["a"]}):b,n="function"===typeof S?await S({Vue:o["a"],store:e}):S;e.$router=n;const t={router:n,store:e,render:e=>e(m),el:"#q-app"};return{app:t,store:e,router:n}},k=t("a925"),A={failed:"Action failed",success:"Action was successful"},R={failed:"Action failed",success:"Action was successful"},x={failed:"Action failed",success:"Action was successful"},L={failed:"Action failed",success:"Action was successful"},H={failed:"Action failed",success:"Action was successful"},P={failed:"Action failed",success:"Action was successful"},T={"en-us":A,el:R,yo:x,ha:L,pcm:H,ig:P};o["a"].use(k["a"]);const E=new k["a"]({locale:"en-us",fallbackLocale:"en-us",messages:T},{locale:"el",fallbackLocale:"en-us",messages:T},{locale:"yo",fallbackLocale:"en-us",messages:T},{locale:"ha",fallbackLocale:"en-us",messages:T},{locale:"pcm",fallbackLocale:"en-us",messages:T},{locale:"ig",fallbackLocale:"en-us",messages:T});var W=({app:e})=>{e.i18n=E},z=t("bc3a"),U=t.n(z),N=t("5638"),O=t("ec26");let $="localhost"==window.location.hostname?"chat-test.heron.gr":window.location.hostname,j=window.location.toString().split("?").length>1?window.location.toString().split("?")[1].split("#")[0].split("&"):[];var D=function(e){if(""==e)return{};for(var n={},t=0;t<e.length;++t){var o=e[t].split("=",2);1==o.length?n[o[0]]="":n[o[0]]=decodeURIComponent(o[1].replace(/\+/g," "))}return n}(j);let B={local:{isHTTP:!1,host:"http://127.0.0.1",wsHost:"127.0.0.1",wsAuthEndpoint:"/broadcasting/auth/",baseApiEndpoint:"http://heron.superbo.ai/api/bot/",forceTLS:!1},remote:{isHTTP:!0,host:"https://"+$,wsHost:$,wsAuthEndpoint:"https://"+$+"/bm/broadcasting/auth/",baseApiEndpoint:"https://"+$+"/bm/api/bot/",forceTLS:!0}},J="mtnapp",V="mobile",q=!1,K="127.0.0.1"==$||"localhost"==$?B.local:B.remote,M=6001,Q="mtng";async function X(){const{app:e,store:n,router:t}=await I();let s=!0;const a=e=>{s=!1,window.location.href=e},i=window.location.href.replace(window.location.origin,""),c=[W,void 0];for(let r=0;!0===s&&r<c.length;r++)if("function"===typeof c[r])try{await c[r]({app:e,router:t,store:n,Vue:o["a"],ssrContext:null,redirect:a,urlPath:i})}catch(l){return l&&l.url?void(window.location.href=l.url):void console.error("[Quasar] boot error:",l)}!1!==s&&new o["a"](e)}window.initWebWidget=function(e){if(q)var n=function(){return new Promise((e,n)=>{e({headers:{"x-xsrf-token":"fake"},data:{data:{msisdn:"",un:"Developer",channel:"web",keyword:"",is_file_supported:"yes",max_file_size_in_bytes:26214400,is_audio_supported:"no",is_matching_user_input_to_button_label:"yes",new_session:!0,theme:"heron",texts:encodeURIComponent('{"title":"SUPERBO (DEV)","unsatisfied":"Unsatisfied","neutral":"Neutral","satisfied":"Satisfied"}'),assets:"{}",channels:"{}",locale:"en-us",show_end_session_screen:!1,close_redirect_url:"app://exit",minimize_action:"chatbot_minimize"}}})})};else n=function(){const e=U.a.create({baseURL:K.baseApiEndpoint});return e.post("settings?ch="+D["ch"],{vw_otp:D["vw_otp"]},{withCredentials:!0})};n().then((function(n){if(!q){let e=n.headers["x-xsrf-token"];U.a.defaults.headers.common["X-XSRF-TOKEN"]=e,U.a.defaults.headers.common["X-CSRF-TOKEN"]=e,U.a.defaults.withCredentials=!0}let s=n.data.data,a="yes"===s["is_file_supported"],i="yes"===s["is_audio_supported"],c="yes"===s["is_matching_user_input_to_button_label"],l="yes"==s["show_end_session_screen"],r=s["msisdn"],u=s["un"],d=s["channel"],h=s["locale"],p="true"===s["new_session"],w=s["m"],f="undefined"==typeof s["theme"]||"null"==typeof s["theme"]||""==s["theme"]?"default":s["theme"],m="undefined"==typeof s["close_redirect_url"]||"null"==typeof s["close_redirect_url"]||""==s["close_redirect_url"]?"":s["close_redirect_url"],_="undefined"==typeof s["minimize_action"]||"null"==typeof s["minimize_action"]||""==s["minimize_action"]?"":s["minimize_action"];var b=s["texts"]?s["texts"]:"{}";b=JSON.parse(decodeURIComponent(b).replaceAll("+"," ")),null==b&&(b={}),b["feedback_unsatisfied"]?b["unsatisfied"]=b["feedback_unsatisfied"]:b["unsatisfied"]="Unsatisfied",b["feedback_neutral"]?b["neutral"]=b["feedback_neutral"]:b["neutral"]="Neutral",b["feedback_satisfied"]?b["satisfied"]=b["feedback_satisfied"]:b["satisfied"]="Satisfied";let g=encodeURIComponent(JSON.stringify(b)),y=s["assets"]?s["assets"]:"{}",C=s["channels"]?s["channels"]:"{}",v=s["keyword"],S=s["cuid"];p&&sessionStorage.removeItem("session");const I=function(){const e=U.a.create({baseURL:K.baseApiEndpoint});let n=h,o=null,p=null,b=null,I=a,k=i,A=c,R=l,x=r,L=d,H=async function(t){try{let s=q();const{data:a}=await e.post("session/next?ch="+d,Object.assign({sessionId:o,locale:n,userId:s,channel:$(),msisdn:W(),channelData:j(),websockets:{native:typeof WebSocket,channel:window.echoChannel&&window.echoChannel.name?window.echoChannel.name:"not_connected",socket_id:window.echoChannel&&window.echoChannel.pusher&&window.echoChannel.pusher.connection&&window.echoChannel.pusher.connection.socket_id?window.echoChannel.pusher.connection.socket_id:"not_connected",state:window.echoChannel&&window.echoChannel.pusher&&window.echoChannel.pusher.connection&&window.echoChannel.pusher.connection.state?window.echoChannel.pusher.connection.state:"not_connected"}},t));return Z(a.sessionId),a}catch(s){console.log("Next question endpoint: ",s)}},P=function(e){b=e},T=async function(){try{let t=q();const{data:o}=await e.post("session?ch="+d,{locale:n,channel:$(),userId:t,msisdn:W(),channelData:j()});return Z(o.sessionId),o}catch(t){return console.log("Init session endpoint: ",t),!1}},E=function(e){null!==e&&void 0!==e&&""!==e&&(x=e,sessionStorage.setItem("msisdn",e))},W=function(){return null!==x&&void 0!==x&&""!==x||(x=sessionStorage.getItem("msisdn")),x},z=function(e){null!==e&&void 0!==e&&""!==e&&(L=e)},$=function(){return D()?"mobile":B()?"mtnapp":L},j=function(){return void 0!==u&&null!==u&&""!=u?{username:u}:null},D=function(){return L==V},B=function(){return L==J},q=function(){if(S&&S.length>0)return S;let e=D()?"mobile-":B()?"mtnapp-":$()+"-",n=e+"userId";var t=sessionStorage.getItem(n);if(null==t||"undefined"==typeof t||t.endsWith("null")){let t=e+Object(O["a"])();sessionStorage.setItem(n,t)}return sessionStorage.getItem(n)},X=async function(e){if("undefined"!=typeof echoChannelReconnect&&window.echoChannelReconnect&&window.echoChannelReconnect>-1&&(clearInterval(window.echoChannelReconnect),window.echoChannelReconnect=-1),null!==p){if(p.sessionId==e){let e=window.echoChannel.pusher.connection.state;if("unavailable"!=e&&"disconnected"!=e)return void(window.debug&&console.log("We already have a websocket connection for this session id"))}p.disconnect(),p=null}t("782e");p=1==K.isHTTP?new N["a"]({broadcaster:"pusher",key:Q,host:K.host,wsHost:K.wsHost,wssHost:K.wsHost,httpHost:K.wsHost,wsPath:"/ws",httpPath:"/ws",disableStats:!0,forceTLS:K.forceTLS,authEndpoint:K.wsAuthEndpoint+"?ch="+d,auth:{headers:{Authorization:"Bearer "+e,Accept:"application/json","x-app-id":Q}},pong_timeout:3e4,unavailable_timeout:1e4}):new N["a"]({broadcaster:"pusher",key:Q,host:K.host,wsHost:K.wsHost,wssHost:K.wsHost,httpHost:K.wsHost,wsPort:M,wssPort:M,disableStats:!0,forceTLS:K.forceTLS,authEndpoint:K.wsAuthEndpoint,auth:{headers:{Authorization:"Bearer "+e,Accept:"application/json","x-app-id":Q,channel:d}},pong_timeout:3e4,unavailable_timeout:1e4}),p.sessionId=e;let n=function(){if(window.echoChannel&&window.echoChannel.pusher&&window.echoChannel.pusher.connection&&window.echoChannel.pusher.connection.state){let e=window.echoChannel.pusher.connection.state;return"unavailable"!=e&&"disconnected"!=e}return!1},o=function(e){if(window.echoChannelReconnect&&window.echoChannelReconnect>-1&&(clearInterval(window.echoChannelReconnect),window.echoChannelReconnect=-1),null==e||"null"==e||"fake"==e)return;const t=p.private("dm."+e);return t.notification(e=>{"MessageSent"==e.type&&b(e),"SessionReset"==e.type&&(Z(e.newSessionId),X(e.newSessionId))}),"undefined"==typeof window.lastCall&&(window.lastCall=0),window.lastCall+=1,setTimeout((function(t){t==window.lastCall?window.echoChannelReconnect=setInterval((function(){if(t!=window.lastCall)return!1;n()||(window.debug&&console.log("We should reconnect to websockets | SessionId = "+e),window.echoChannel&&window.echoChannel.pusher?window.echoChannel.pusher.connect():window.debug&&console.log("We should reconnect to websockets | SessionId = "+e+" BUT we do not have a pusher to do so."))}),p.options.pong_timeout):window.debug&&console.log("Ignore timeout #"+t)}),p.options.unavailable_timeout,window.lastCall),t};window.echoChannel=o(e)},F=async function(){null!==p&&(p.disconnect(),p=null)},G=async function(t){try{const{data:s}=await e.post("page?ch="+d,Object.assign({sessionId:o,locale:n},t));return s}catch(s){return console.log("Get static page endpoint: ",s),!1}},Y=function(){o=null;try{sessionStorage.removeItem("session"),F()}catch(e){}},Z=function(e){if("undefined"!==typeof e&&o!==e){o=e;try{sessionStorage.setItem("session",o)}catch(n){}}},ee=function(){return o},ne=function(e){n!==e&&(n=e)},te=function(){return n},oe=function(){let e=ee();window.debug&&console.log("openWebsockets SessionId = "+e),X(e)};return{axios:U.a,setAppKey:z,setMSISDN:E,initSession:T,closeSession:F,setResponseHandler:P,getNextQuestion:H,resetSession:Y,setSessionId:Z,getSessionId:ee,setLocale:ne,getLocale:te,openWebsockets:oe,getPage:G,is_file_supported:I,is_audio_supported:k,is_matching_user_input_to_button_label:A,show_end_session_screen:R,close_redirect_url:m,minimize_action:_,mode:w,keyword:v,theme:f,texts:g,assets:y,channels:C,settings:s,channel:$()}}();o["a"].prototype.$api=I,e()}))},X()},"31cd":function(e,n,t){},4:function(e,n,t){e.exports=t("2f39")}},[[4,4,0]]]);